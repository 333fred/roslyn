<?xml version="1.0" encoding="utf-8"?>
<Project>
   <PropertyGroup>
      <PublishingVersion>3</PublishingVersion>
   </PropertyGroup>

  <PropertyGroup>
    <PublishDependsOnTargets>_ResolvePublishRoslynNuGetPackages;$(PublishDependsOnTargets)</PublishDependsOnTargets>
  </PropertyGroup>

  <Target Name="_ResolvePublishRoslynNuGetPackages"
          DependsOnTargets="BeforePublish"
          BeforeTargets="PublishToAzureDevOpsArtifacts">
    <ItemGroup>
      <!-- During PR Validation we need to remove all Packages from being published as they are published separately to the CoreXT feed. -->
      <ItemsToPushToBlobFeed Include="@(ExistingSymbolPackages);@(SymbolPackagesToGenerate)" Exclude="@(ItemsToPushToBlobFeed)"
                             Condition=" '$(PreReleaseVersionLabel)' == 'pr-validation' " />
    </ItemGroup>
  </Target>
</Project>