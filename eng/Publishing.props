<?xml version="1.0" encoding="utf-8"?>
<Project>
   <PropertyGroup>
      <PublishingVersion>3</PublishingVersion>
   </PropertyGroup>

  <PropertyGroup>
    <PublishDependsOnTargets>_ResolvePublishRoslynNuGetPackages;$(PublishDependsOnTargets)</PublishDependsOnTargets>
  </PropertyGroup>

  <Target Name="_ResolvePublishRoslynNuGetPackages"
          DependsOnTargets="BeforePublish"
          BeforeTargets="PublishToAzureDevOpsArtifacts">
    <!--
      During PR Validation we only need to publish symbols with Arcade,
      since our packages are published separately to the CoreXT feed.
    -->
    <ItemGroup Condition=" '$(PreReleaseVersionLabel)' == 'pr-validation' ">
      <_SymbolPackagesToPush Include="@(ItemsToPushToBlobFeed)"
                             Condition="$([System.String]::Copy(%(FullPath)).EndsWith('.symbols.nupkg'))" />

      <ItemsToPushToBlobFeed Include="@(_SymbolPackagesToPush)"
                             Exclude="@(ItemsToPushToBlobFeed)" />
    </ItemGroup>
  </Target>
</Project>